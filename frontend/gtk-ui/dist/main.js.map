{"version":3,"file":"main.js","sources":["../src/main.ts"],"sourcesContent":["import Gio from \"gi://Gio\";\nimport Gtk from \"gi://Gtk?version=4.0\";\nimport Adw from \"gi://Adw?version=1\";\nimport {\n  Application,\n  ApplicationWindow,\n  Box,\n  Button,\n  Entry,\n  Label,\n  ListBox,\n  Popover,\n} from \"gi://Gtk?version=4.0\";\n\nimport { DBusProxy } from \"gi://Gio\";\n\nimport AppIndicator from \"gi://AppIndicator3?version=0.1\";\n\ninterface ClipboardItem {\n  type: \"text\" | \"image\";\n  content: string;\n}\n\nclass ClipboardApp extends Adw.Application {\n  private window: ApplicationWindow;\n  private popover: Popover;\n  private indicator: AppIndicator.Indicator;\n  private dbusProxy: DBusProxy;\n  private history: ClipboardItem[] = [];\n\n  constructor() {\n    super({\n      application_id: \"com.yourdomain.clipboardmanager\",\n      flags: Gio.ApplicationFlags.FLAGS_NONE,\n    });\n\n    // Set up tray icon\n    this.indicator = AppIndicator.Indicator.new(\n      \"clipboard-manager\",\n      \"edit-paste-symbolic\",\n      AppIndicator.IndicatorCategory.APPLICATION_STATUS,\n    );\n    this.indicator.set_status(AppIndicator.IndicatorStatus.ACTIVE);\n\n    // Create popover for clipboard UI\n    this.popover = new Gtk.Popover();\n    const box = new Gtk.Box({\n      orientation: Gtk.Orientation.VERTICAL,\n      spacing: 10,\n    });\n    this.popover.set_child(box);\n\n    // Search entry\n    const search = new Gtk.Entry({ placeholder_text: \"Search clipboard...\" });\n    search.connect(\"changed\", this.refreshUI.bind(this));\n    box.append(search);\n\n    // List for history\n    const list = new Gtk.ListBox();\n    box.append(list);\n\n    // Clear button\n    const clearBtn = new Gtk.Button({ label: \"Clear All\" });\n    clearBtn.connect(\"clicked\", this.clearHistory.bind(this));\n    box.append(clearBtn);\n\n    // Attach popover to tray (on click)\n    this.indicator.set_menu(this.popover); // Note: AppIndicator uses menu, but we can hack popover\n\n    // Set up DBus proxy for Rust backend\n    this.dbusProxy = Gio.DBusProxy.new_sync(\n      Gio.DBus.session,\n      Gio.DBusProxyFlags.NONE,\n      null,\n      \"org.yourdomain.ClipboardDaemon\",\n      \"/org/yourdomain/ClipboardDaemon\",\n      \"org.yourdomain.ClipboardDaemon\",\n      null,\n    );\n\n    // Listen for updates\n    this.dbusProxy.connect_signal(\n      \"HistoryUpdated\",\n      this.loadHistory.bind(this),\n    );\n\n    // Initial load\n    this.loadHistory();\n  }\n\n  // ... (methods in next steps)\n}\n\nfunction main(argv: string[]): number {\n  const app = new ClipboardApp();\n  return app.run(argv);\n}\n\nmain(ARGV); // GJS entry\n"],"names":[],"mappings":";;;;;AAuBA,MAAM,YAAa,SAAQ,GAAG,CAAC,WAAW,CAAA;AAChC,IAAA,MAAM;AACN,IAAA,OAAO;AACP,IAAA,SAAS;AACT,IAAA,SAAS;IACT,OAAO,GAAoB,EAAE;AAErC,IAAA,WAAA,GAAA;AACE,QAAA,KAAK,CAAC;AACJ,YAAA,cAAc,EAAE,iCAAiC;AACjD,YAAA,KAAK,EAAE,GAAG,CAAC,gBAAgB,CAAC,UAAU;AACvC,SAAA,CAAC;;AAGF,QAAA,IAAI,CAAC,SAAS,GAAG,YAAY,CAAC,SAAS,CAAC,GAAG,CACzC,mBAAmB,EACnB,qBAAqB,EACrB,YAAY,CAAC,iBAAiB,CAAC,kBAAkB,CAClD;QACD,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,YAAY,CAAC,eAAe,CAAC,MAAM,CAAC;;QAG9D,IAAI,CAAC,OAAO,GAAG,IAAI,GAAG,CAAC,OAAO,EAAE;AAChC,QAAA,MAAM,GAAG,GAAG,IAAI,GAAG,CAAC,GAAG,CAAC;AACtB,YAAA,WAAW,EAAE,GAAG,CAAC,WAAW,CAAC,QAAQ;AACrC,YAAA,OAAO,EAAE,EAAE;AACZ,SAAA,CAAC;AACF,QAAA,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC;;AAG3B,QAAA,MAAM,MAAM,GAAG,IAAI,GAAG,CAAC,KAAK,CAAC,EAAE,gBAAgB,EAAE,qBAAqB,EAAE,CAAC;AACzE,QAAA,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AACpD,QAAA,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC;;AAGlB,QAAA,MAAM,IAAI,GAAG,IAAI,GAAG,CAAC,OAAO,EAAE;AAC9B,QAAA,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC;;AAGhB,QAAA,MAAM,QAAQ,GAAG,IAAI,GAAG,CAAC,MAAM,CAAC,EAAE,KAAK,EAAE,WAAW,EAAE,CAAC;AACvD,QAAA,QAAQ,CAAC,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AACzD,QAAA,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC;;QAGpB,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;;AAGtC,QAAA,IAAI,CAAC,SAAS,GAAG,GAAG,CAAC,SAAS,CAAC,QAAQ,CACrC,GAAG,CAAC,IAAI,CAAC,OAAO,EAChB,GAAG,CAAC,cAAc,CAAC,IAAI,EACvB,IAAI,EACJ,gCAAgC,EAChC,iCAAiC,EACjC,gCAAgC,EAChC,IAAI,CACL;;AAGD,QAAA,IAAI,CAAC,SAAS,CAAC,cAAc,CAC3B,gBAAgB,EAChB,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAC5B;;QAGD,IAAI,CAAC,WAAW,EAAE;IACpB;AAGD;AAED,SAAS,IAAI,CAAC,IAAc,EAAA;AAC1B,IAAA,MAAM,GAAG,GAAG,IAAI,YAAY,EAAE;AAC9B,IAAA,OAAO,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC;AACtB;AAEA,IAAI,CAAC,IAAI,CAAC,CAAC"}